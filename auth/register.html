<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
</head>
<body>

<h2>Register</h2>

<input type="email" id="email" placeholder="Email"><br><br>
<input type="password" id="password" placeholder="Password (min 6 chars)"><br><br>

<select id="role">
  <option value="customer">Customer</option>
  <option value="vendor">Vendor</option>
</select><br><br>

<button id="registerBtn">Register</button>
<p id="msg"></p>

<script type="module">
import { auth, db } from "../firebase.js";
import { createUserWithEmailAndPassword }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, setDoc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

registerBtn.onclick = async () => {
  try {
    const emailVal = email.value;
    const passVal = password.value;
    const roleVal = role.value;

    const cred = await createUserWithEmailAndPassword(auth, emailVal, passVal);

    await setDoc(doc(db, "users", cred.user.uid), {
      email: emailVal,
      role: roleVal,
      createdAt: Date.now()
    });

    msg.innerText = "Registration successful";
    window.location.href = "login.html";
  } catch (e) {
    msg.innerText = e.message;
  }
};
</script>

</body>
</html>
